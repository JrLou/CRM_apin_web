webpackJsonp([62],{1722:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.addRole=t.modifyRole=t.getV2RoleOwnFunctionList=t.getV2RoleFunctionList=void 0;var a=n(120),u=r(a),c=n(312),d=r(c),o=(t.getV2RoleFunctionList=function(){var e=(0,d.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cr/v2/accounts/role/functionList"));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getV2RoleOwnFunctionList=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cr/v2/accounts/role/ownFunctionList?"+(0,i.stringify)(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.modifyRole=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cr/v2/accounts/role/modifyRole",{method:"PUT",body:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.addRole=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.default)("/cr/v2/accounts/role/addRole",{method:"POST",body:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n(313)),s=r(o),i=n(316)},721:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=[],n=[],r=[],a=[],u=0;u<e.length;u++)1==e[u].type?t.push({functionList:[],id:e[u].id,name:e[u].name}):2==e[u].type?r.push(e[u]):3==e[u].type&&(n.push({functionId:e[u].parentId,list:[]}),a.push(e[u]));for(var c=0;c<r.length;c++)for(var d=0;d<t.length;d++)r[c].parentId==t[d].id&&t[d].functionList.push({id:r[c].id,groupId:r[c].parentId,name:r[c].name});for(var o=0;o<a.length;o++)for(var s=0;s<n.length;s++)a[o].parentId==n[s].functionId&&n[s].list.push({name:a[o].name,id:a[o].id});return{gData:t,sonData:n}}function u(e,t){var n=[],r=[],a={};return e.map(function(e,t){a[e.parentId]?a[e.parentId].push(e.id):a[e.parentId]=[e.id],-1==r.indexOf(e.parentId)&&r.push(e.parentId)}),t.map(function(e,t){e.functionList.map(function(e,t){r.indexOf(e.id)>-1&&-1==n.indexOf("parent-"+e.groupId)&&n.push("parent-"+e.groupId)})}),{checkedKeys:r,oldselectedKeys:r,selectedKeys:[],expandedKeys:n,rememberSelected:a}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(7),d=r(c),o=n(120),s=r(o),i=n(1722);t.default={namespace:"role",state:{gData:[],sonData:[],checkedKeys:[],oldselectedKeys:[],selectedKeys:[],expandedKeys:[],rememberSelected:{},post:{accountId:"00000000000000000000000000000000",applicationId:"2ef8d902c12f454f9acdbb0484f8c05a",builtin:!1,createdTime:"2017-10-26 11:28:25",creatorUserId:"00000000000000000000000000000000",functions:null,id:"1cdfd6a033704ceb8d104de0cb0cddba",members:null,name:"\u7cfb\u7edf\u7ba1\u7406\u5458",remark:null,title:"\u7f16\u8f91\u89d2\u8272"}},effects:{fetchV2RoleFunctionList:s.default.mark(function e(t,n){var r,a,u=n.call,c=n.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.getV2RoleFunctionList);case 2:if(r=e.sent,200!=r.code){e.next=6;break}return e.next=6,c({type:"saveFunc",payload:r.data});case 6:return e.next=8,u(i.getV2RoleOwnFunctionList,{roleId:"1cdfd6a033704ceb8d104de0cb0cddba"});case 8:if(a=e.sent,200!=a.code){e.next=12;break}return e.next=12,c({type:"saveOwnFunc",payload:a.data});case 12:case"end":return e.stop()}},e,this)}),edit:s.default.mark(function e(t,n){var r,a=t.param,u=n.call;n.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.modifyRole,a);case 2:r=e.sent;case 3:case"end":return e.stop()}},e,this)}),add:s.default.mark(function e(t,n){var r,a=t.param,u=n.call;n.put;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(i.addRole,a);case 2:r=e.sent;case 3:case"end":return e.stop()}},e,this)})},reducers:{saveFunc:function(e,t){var n=t.payload,r=a(n);return(0,d.default)({},e,r)},saveOwnFunc:function(e,t){var n=t.payload,r=u(n,e.gData);return(0,d.default)({},e,r)}}},e.exports=t.default}});